/*
File: bgHttpAppWeb.c
=====

*/

/*
B&R components:
===============================================================================
*/
#ifndef WIN32
#include <bur/plc.h>
#include <bur/plctypes.h>
#include <astcp.h>
#include <brsystem.h>
#include <sys_lib.h>
#endif
/*
BG components
===============================================================================
*/
#include "bgdebug.h"
#include "bgstring.h"
#include "bgsscanf.h"


#include "bgTcpSocketClientServer.h"
#include "bgHttpProtocol.h"
#include "bgHttpAppWeb.h"


static void file1(bgTcpSocketSession_typ* pSession);
static void file2(bgTcpSocketSession_typ* pSession);
static void file3(bgTcpSocketSession_typ* pSession);
static void file4(bgTcpSocketSession_typ* pSession);

/*
Web server
######################################################################################################
######################################################################################################
######################################################################################################
######################################################################################################
*/
void bgWebServerApplication(bgTcpSocketSession_typ* pSession)
{
    /*session/application/protocol specific data structure*/
    httpMessage_typ* r = (httpMessage_typ*)pSession->pProtocol;
/*
	bgXmlRpcServerApplication(pSession);	
	return;
*/
	if( r->commandId != BGHTTP_REQUEST_COMMAND_GET ){
		DBGMSG("bgWebServerApplication(): command (%s) not supported!\r\n", r->command);			
		bgHttpSendErrorResponse(pSession, 405);
 		return;
	} 

	if( bgStrFind(r->url, "file1", -1, -1) != -1){
		file1(pSession);
	}else
	if( bgStrFind(r->url, "file2", -1, -1) != -1){
 		file2(pSession);
	}else
	if( bgStrFind(r->url, "file4", -1, -1) != -1){
 		file4(pSession);
	}else
	if( bgStrFind(r->url, "file3", -1, -1) != -1){
 		file3(pSession);
	}else{
		bgHttpSendErrorResponse(pSession, 404);
		DBGMSG("bgWebServerApplication(): file not found, %s\r\n", r->url);
        return;
	}
 
	bgHttpSendData(pSession);
}


/*
Web client
######################################################################################################
######################################################################################################
######################################################################################################
######################################################################################################
*/
void bgWebClientApplication(bgTcpSocketSession_typ* pSession)
{
int i;
char* pMem;
int sizeMem;
httpAppWeb_typ* pWebData;
int sizeMemAppTotal = 0;

    /*session/application/protocol specific data structure*/
    httpMessage_typ* r = (httpMessage_typ*)pSession->pProtocol;


/*App Specific Buf MemAlloc*/
	/*1) application specific data structure*/
	if( bgBufMemAllocCreateBlock(&pSession->sessionMem, sizeof(httpAppWeb_typ) + sizeof(char*), &pMem, &sizeMem) )
	{
    	DBGMSG("bgHttpClientSessionAppMemAlloc(): FATAL ERROR (1); No memory\r\n");
		return;
	}
	pWebData = (httpAppWeb_typ*)pMem;
	sizeMemAppTotal += sizeMem;

	/*2) set storage for line list (long list of items, i.e. several hundred items, depending on the memory)*/
	if( bgBufMemAllocCreateBlock(&pSession->sessionMem, 0, &pMem, &sizeMem) )
	{
    	DBGMSG("bgHttpClientSessionAppMemAlloc(): FATAL ERROR (4); No memory\r\n");
		return;
	}
    bgStringListExMemSet(&pWebData->listContentLines, pMem, sizeMem);
	sizeMemAppTotal += sizeMem;
	DBGMSG("bgWebClientApplication: memTotal=%d, memList=%d\n", sizeMemAppTotal, sizeMem);







	/*if http response does not contain content, request processing is ready*/
	if( !r->contentLength ){
		DBGMSG("bgWebClientApplication: received response with no content!\n");
		return;
	}

	/*parse content part of the request; generate list of content lines*/	
	if( bgStringListLinesEx(&pWebData->listContentLines, &pSession->pRecvBuf[r->contentPosition], 0, 0) < 0 ){
		DBGMSG("bgWebClientApplication(): Received content too long! SessionId= %d, len = %d, Error=500\r\n", 
			pSession->ident, pSession->rxByteCount);
 		return;
    }

	DBGMSG("bgWebClientApplication(): Content list (lines=%d):\r\n", 
		pWebData->listContentLines.itemCount);
	DBGMSG("============================================\r\n");
	for(i=0;i < pWebData->listContentLines.itemCount;i++){
		DBGMSG("%s\r\n", pWebData->listContentLines.items[i]);
	}
	DBGMSG("============================================\r\n");

 	return;
}
/*
############################################################################################################
*/
static void file1(bgTcpSocketSession_typ* pSession)
{

bgHttpServerSendResponseBeg(pSession, 200, "text/html");
APNDCL("<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\">" );
APNDCL("<HTML><HEAD><TITLE>Title FILE1</TITLE>");
APNDCL("<META HTTP-EQUIV=\"Content-Type\" Content=\"text/html; charset=Windows-1252\">");
APNDCL("<STYLE type=\"text/css\">");
APNDCL("BODY { font: 8pt/12pt verdana }");
APNDCL("H1 { font: 13pt/15pt verdana }");
APNDCL("H2 { font: 8pt/12pt verdana }");
APNDCL("A:link { color: red }");
APNDCL("A:visited { color: maroon }");
APNDCL("</STYLE>");
APNDCL("</HEAD><BODY><TABLE width=500 border=0 cellspacing=10><TR><TD>");
APNDCL("<h1>This is FILE1</h1>");
APNDCL("This is just a text!?");
APNDCL("<hr>");
APNDCL("<p>Here is the bulleted list:</p>");
APNDCL("<ul>");
APNDCL("<<li>This is the list of possible links.</li>>");
APNDCL("<li>Link to <a href=\"http://192.168.2.200/file1.html\">File1.html</a> is here.</li>");
APNDCL("<li>Link to <a href=\"http://192.168.2.200/file2.html\">File2.html</a> is here.</li>");
APNDCL("<li>Link to <a href=\"http://192.168.2.200/file3.html\">File3.html</a> is here.</li>");
APNDCL("</ul>");
APNDCL("<h2>Example of header (H2)</h2>");
APNDCL("<hr>");
APNDCL("</TD></TR></TABLE></BODY></HTML>");
bgHttpServerSendResponseEnd(pSession);
}

static void file2(bgTcpSocketSession_typ* pSession)
{

bgHttpServerSendResponseBeg(pSession, 200, "text/html");
APNDCL("<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\">" );
APNDCL("<HTML><HEAD><TITLE>Title FILE2</TITLE>");
APNDCL("<META HTTP-EQUIV=\"Content-Type\" Content=\"text/html; charset=Windows-1252\">");
APNDCL("<STYLE type=\"text/css\">");
APNDCL("BODY { font: 8pt/12pt verdana }");
APNDCL("H1 { font: 13pt/15pt verdana }");
APNDCL("H2 { font: 8pt/12pt verdana }");
APNDCL("A:link { color: red }");
APNDCL("A:visited { color: maroon }");
APNDCL("</STYLE>");
APNDCL("</HEAD><BODY><TABLE width=500 border=0 cellspacing=10><TR><TD>");
APNDCL("<h1>This is FILE2</h1>");
APNDCL("This is just a text!?");
APNDCL("<hr>");
APNDCL("<p>Here is the bulleted list:</p>");
APNDCL("<ul>");
APNDCL("<<li>This is the list of possible links.</li>>");
APNDCL("<li>Link to <a href=\"http://192.168.2.200/file1.html\">File1.html</a> is here.</li>");
APNDCL("<li>Link to <a href=\"http://192.168.2.200/file2.html\">File2.html</a> is here.</li>");
APNDCL("<li>Link to <a href=\"http://192.168.2.200/file3.html\">File3.html</a> is here.</li>");
APNDCL("</ul>");
APNDCL("<h2>Example of header (H2)</h2>");
APNDCL("<hr>");
APNDCL("</TD></TR></TABLE></BODY></HTML>");
bgHttpServerSendResponseEnd(pSession);
}

static void file3(bgTcpSocketSession_typ* pSession)
{

bgHttpServerSendResponseBeg(pSession, 200, "text/html");
APNDCL("<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\">" );
APNDCL("<HTML><HEAD><TITLE>Title FILE3</TITLE>");
APNDCL("<META HTTP-EQUIV=\"Content-Type\" Content=\"text/html; charset=Windows-1252\">");
APNDCL("<STYLE type=\"text/css\">");
APNDCL("BODY { font: 8pt/12pt verdana }");
APNDCL("H1 { font: 13pt/15pt verdana }");
APNDCL("H2 { font: 8pt/12pt verdana }");
APNDCL("A:link { color: red }");
APNDCL("A:visited { color: maroon }");
APNDCL("</STYLE>");
APNDCL("</HEAD><BODY><TABLE width=500 border=0 cellspacing=10><TR><TD>");
APNDCL("<h1>This is FILE3</h1>");
APNDCL("Really long text follows (send buffer overflow!)");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("1234567890123456789012345678901234567890123456789012345678901234567890123456789012345678901234567890");
APNDCL("<hr>");
APNDCL("<p>Bulleted list:</p>");
APNDCL("<ul>");
APNDCL("<<li>This is the list of possible links.</li>>");
APNDCL("<li>Link to <a href=\"http://192.168.2.200/file1.html\">File1.html</a> is here.</li>");
APNDCL("<li>Link to <a href=\"http://192.168.2.200/file2.html\">File2.html</a> is here.</li>");
APNDCL("<li>Link to <a href=\"http://192.168.2.200/file3.html\">File3.html</a> is here.</li>");
APNDCL("</ul>");
APNDCL("<h2>Header (H2)</h2>");
APNDCL("<hr>");
APNDCL("</TD></TR></TABLE></BODY></HTML>");
bgHttpServerSendResponseEnd(pSession);
}

static void file4(bgTcpSocketSession_typ* pSession)
{

bgHttpServerSendResponseBeg(pSession, 200, "text/html");
APNDCL("<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\">" );
APNDCL("01234567890");
bgHttpServerSendResponseEnd(pSession);
}
